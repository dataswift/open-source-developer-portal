<!DOCTYPE html><html class=no-js><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><title>Micro-deposit verification | Hub of All Things API</title><meta name=description content="Programmatically verify a bank to initiate a bank transfer."><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=/css/main.7200.css><link rel=stylesheet href="//fonts.googleapis.com/css?family=Roboto+Slab:300|Open+Sans:300,400,600,700"><script src=/js/head-scripts.e78f.js></script><script src=https://cdn.statuspage.io/se-v2.js></script></head><body><!--[if lt IE 8]>
        <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]--><header><div class="header__primary js-two-col-header-primary"><div class=page-wrap><div><a href=https://www.hubofallthings.com class="logo icon-logo-hat-white">Hub of All Things</a><div class=hamburger><a href="https://hubofallthings.com/main/what-is-the-hat/">What is the HAT</a> <a class="btn primary js-hamburger">Menu</a></div></div><nav class=js-hamburger-nav><a href="https://www.hatdex.org/">Data Exchange</a> <a href="https://hatcommunity.org/">Community Foundation</a> <a href="/">Developers</a> <a href="http://hubofallthings.com/hat-rd/">Research</a> <a class="btn primary" href="https://hubofallthings.com/main/what-is-the-hat/">Learn More</a></nav></div></div><nav class="header__secondary js-two-col-nav-toggle"><div class=js-two-col-header-secondary><div class=page-wrap><a href="/api-docs/" class=active>API docs</a> <a href=https://github.com/Hub-of-all-Things>Repositories</a><div class="custom-select custom-select--blue js-global-language-select"><select name=select class=js-language-select><option value=raw>raw</option><option value=php>php</option><option value=ruby>ruby</option><option value=python>python</option><option value=javascript>javascript</option></select><div class=arrow></div></div></div></div></nav></header><div class=content><div class=cnt-two-col><div class=page-wrap><section class="cnt-two-col__nav js-two-col-nav"><div class=close><button class="js-two-col-nav-close icon-cnt-two-col-close"></button></div><div class=language-picker><h6>Language</h6><div class="custom-select custom-select--blue"><select class=js-language-select name=select><option value=raw>raw</option><option value=php selected>php</option><option value=ruby>ruby</option><option value=python>python</option><option value=javascript>javascript</option></select><div class=arrow></div></div></div><!-- nav elements below should be in the same order of the secondary navigation --><nav class="side-nav js-side-nav active"><section><h6>Introduction</h6><ul></ul><h6>Endpoints</h6><ul></ul><h6>Other Resources</h6><ul><li class=external-link><a href=https://hatters.hubofallthings.com target=_blank><span class=icon-sidenav-option>Get a HAT</span></a></li><li class=external-link><a href=http://forum.hatcommunity.org/c/developers target=_blank><span class=icon-sidenav-option>Developer Forum</span></a></li></ul></section></nav></section><section class=cnt-two-col__content><h1 id=funding-source-verification>Funding source verification</h1><h2 id=micro-deposit-verification>Micro-deposit verification</h2><p>If you choose the micro-deposit method of bank verification, Dwolla will transfer two deposits of less than $0.10 to your customer&rsquo;s linked bank or credit union account. After <a href=https://docsv2.dwolla.com/#initiate-micro-deposits>initiating micro-deposits</a>, two random amounts will post to your customer’s bank account in 1-2 business days. Once your customer sees these deposits in their account, they need to verify the two amounts in your application. If subscribed to <a href=/guides/webhooks>webhooks</a>, your application will be notified throughout this process via micro-deposit related <a href=https://docsv2.dwolla.com/#events>events</a>.</p><h3 id=retrieve-the-funding-source>Retrieve the funding source</h3><p>After your customer has added a bank account you&rsquo;ll want to retrieve the funding source to check if a <code>initiate-micro-deposits</code> link relation exists. A link to <code>initiate-micro-deposits</code> will return when an unverified <code>bank</code> funding source is eligible to receive micro-deposits.</p><div class="code-snippet js-code-snippet language-raw"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-raw data-lang=raw>GET https://api.dwolla.com/funding-sources/e52006c3-7560-4ff1-99d5-b0f3a6f4f909
Accept: application/vnd.dwolla.v1.hal+json
Authorization: Bearer pBA9fVDBEyYZCEsLf/wKehyh1RTpzjUj5KzIRfDi0wKTii7DqY

...

{
  "_links": {
    "self": {
      "href": "https://api.dwolla.com/funding-sources/e52006c3-7560-4ff1-99d5-b0f3a6f4f909"
    },
    "customer": {
      "href": "https://api.dwolla.com/customers/36e9dcb2-889b-4873-8e52-0c9404ea002a"
    },
    "initiate-micro-deposits": {
      "href": "https://api.dwolla.com/funding-sources/e52006c3-7560-4ff1-99d5-b0f3a6f4f909/micro-deposits"
    }
  },
  "id": "e52006c3-7560-4ff1-99d5-b0f3a6f4f909",
  "status": "unverified",
  "type": "bank",
  "name": "Test checking account",
  "created": "2015-10-23T20:37:57.137Z"
}
</code></pre></div></div><div class="code-snippet js-code-snippet language-ruby"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-ruby data-lang=ruby><span class=n>funding_source_url</span> <span class=o>=</span> <span class=s1>'https://api.dwolla.com/funding-sources/e52006c3-7560-4ff1-99d5-b0f3a6f4f909'</span>

<span class=c1># Using DwollaV2 - https://github.com/Dwolla/dwolla-v2-ruby (Recommended)</span>
<span class=n>retrieved</span> <span class=o>=</span> <span class=n>account_token</span><span class=p>.</span><span class=nf>get</span> <span class=n>funding_source_url</span>
<span class=n>retrieved</span><span class=p>.</span><span class=nf>name</span> <span class=c1># =&gt; "Test checking account"</span>

<span class=c1># Using DwollaSwagger - https://github.com/Dwolla/dwolla-swagger-ruby</span>
<span class=n>retrieved</span> <span class=o>=</span> <span class=no>DwollaSwagger</span><span class=o>::</span><span class=no>FundingsourcesApi</span><span class=p>.</span><span class=nf>id</span><span class=p>(</span><span class=n>funding_source_url</span><span class=p>)</span>
<span class=n>retrieved</span><span class=p>.</span><span class=nf>name</span> <span class=c1># =&gt; "Test checking account"</span>
</code></pre></div></div><div class="code-snippet js-code-snippet language-php"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-php data-lang=php><span class=cp>&lt;?php</span>
<span class=nv>$fund_source</span> <span class=o>=</span> <span class=s1>'https://api.dwolla.com/funding-sources/e52006c3-7560-4ff1-99d5-b0f3a6f4f909'</span><span class=p>;</span>

<span class=nv>$fsApi</span> <span class=o>=</span> <span class=nx>DwollaSwagger\FundingsourcesApi</span><span class=p>(</span><span class=nv>$apiClient</span><span class=p>);</span>

<span class=nv>$retrieved</span> <span class=o>=</span> <span class=nv>$fsApi</span><span class=o>-&gt;</span><span class=na>id</span><span class=p>(</span><span class=nv>$fund_source</span><span class=p>);</span>
<span class=k>print</span><span class=p>(</span><span class=nv>$retrieved</span><span class=o>-&gt;</span><span class=na>name</span><span class=p>);</span> <span class=c1># =&gt; "Test checking account"
</span><span class=cp>?&gt;</span>
</code></pre></div></div><div class="code-snippet js-code-snippet language-python"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-python data-lang=python><span class=n>funding_source_url</span> <span class=o>=</span> <span class=s>'https://api.dwolla.com/funding-sources/e52006c3-7560-4ff1-99d5-b0f3a6f4f909'</span>

<span class=c># Using dwollav2 - https://github.com/Dwolla/dwolla-v2-python (Recommended)</span>
<span class=n>retrieved</span> <span class=o>=</span> <span class=n>account_token</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>funding_source_url</span><span class=p>)</span>
<span class=n>retrieved</span><span class=o>.</span><span class=n>body</span><span class=p>[</span><span class=s>'name'</span><span class=p>]</span> <span class=c># =&gt; 'Test checking account'</span>

<span class=c># Using dwollaswagger - https://github.com/Dwolla/dwolla-swagger-python</span>
<span class=n>fs_api</span> <span class=o>=</span> <span class=n>dwollaswagger</span><span class=o>.</span><span class=n>FundingsourcesApi</span><span class=p>(</span><span class=n>client</span><span class=p>)</span>
<span class=n>retrieved</span> <span class=o>=</span> <span class=n>fs_api</span><span class=o>.</span><span class=nb>id</span><span class=p>(</span><span class=n>funding_source_url</span><span class=p>)</span>
<span class=n>retrieved</span><span class=o>.</span><span class=n>name</span> <span class=c># =&gt; 'Test checking account'</span>
</code></pre></div></div><div class="code-snippet js-code-snippet language-javascript"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-javascript data-lang=javascript><span class=kd>var</span> <span class=nx>fundingSourceUrl</span> <span class=o>=</span> <span class=s1>'https://api.dwolla.com/funding-sources/e52006c3-7560-4ff1-99d5-b0f3a6f4f909'</span><span class=p>;</span>

<span class=nx>accountToken</span>
  <span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>fundingSourceUrl</span><span class=p>)</span>
  <span class=p>.</span><span class=nx>then</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>res</span><span class=p>)</span> <span class=p>{</span>
    <span class=nx>res</span><span class=p>.</span><span class=nx>body</span><span class=p>.</span><span class=nx>name</span><span class=p>;</span> <span class=c1>// =&gt; "Test checking account"</span>
  <span class=p>});</span>
</code></pre></div></div><h3 id=initiate-micro-deposits>Initiate micro-deposits</h3><p>Once you POST to the <a href=https://docsv2.dwolla.com/#initiate-micro-deposits>initiate-micro-deposits</a> link, Dwolla will send two small amounts to your customer&rsquo;s bank or credit union account. If the request is successful, Dwolla returns a <code>HTTP 201</code> and a link to the created micro-deposits resource <code>funding-sources/{id}/micro-deposits</code> in the location header. The micro-deposits resource can be later used to retrieve the status of micro-deposits or verify micro-deposit amounts. If your application is subscribed to webhooks, a webhook will be sent with the <code>microdeposits_added</code> event, notifying your application that micro-deposits are en route to your customer’s bank account.</p><div class="code-snippet js-code-snippet language-raw"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-raw data-lang=raw>POST https://api-uat.dwolla.com/funding-sources/e52006c3-7560-4ff1-99d5-b0f3a6f4f909/micro-deposits
Authorization: Bearer 8tJjM7iTjujLthkbVPMUcHLqMNw4uv5kG712g9j1RRBHplGpwo
Content-Type: application/vnd.dwolla.v1.hal+json
Accept: application/vnd.dwolla.v1.hal+json
Cache-Control: no-cache

HTTP/1.1 201 Created
Location: https://api.dwolla.com/funding-sources/e52006c3-7560-4ff1-99d5-b0f3a6f4f909/micro-deposits
</code></pre></div></div><div class="code-snippet js-code-snippet language-ruby"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-ruby data-lang=ruby><span class=n>retrieved</span> <span class=o>=</span> <span class=s1>'https://api-uat.dwolla.com/funding-sources/e52006c3-7560-4ff1-99d5-b0f3a6f4f909'</span>

<span class=c1># Using DwollaV2 - https://github.com/Dwolla/dwolla-v2-ruby (Recommended)</span>
<span class=n>account_token</span><span class=p>.</span><span class=nf>post</span> <span class=s2>"</span><span class=si>#{</span><span class=n>funding_source_url</span><span class=si>}</span><span class=s2>/micro-deposits"</span>

<span class=c1># Using DwollaSwagger - https://github.com/Dwolla/dwolla-swagger-ruby</span>
<span class=n>micro_deposits</span> <span class=o>=</span> <span class=no>DwollaSwagger</span><span class=o>::</span><span class=no>FundingsourcesApi</span><span class=p>.</span><span class=nf>micro_deposits</span><span class=p>(</span><span class=n>retrieved</span><span class=p>)</span>
</code></pre></div></div><div class="code-snippet js-code-snippet language-javascript"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-javascript data-lang=javascript><span class=kd>var</span> <span class=nx>retrieved</span> <span class=o>=</span> <span class=s1>'https://api-uat.dwolla.com/funding-sources/e52006c3-7560-4ff1-99d5-b0f3a6f4f909'</span><span class=p>;</span>

<span class=nx>accountToken</span><span class=p>.</span><span class=nx>post</span><span class=p>(</span><span class=err>`#</span><span class=p>{</span><span class=nx>retrieved</span><span class=p>}</span><span class=sr>/micro-deposits`</span><span class=se>)</span><span class=err>;
</span></code></pre></div></div><div class="code-snippet js-code-snippet language-python"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-python data-lang=python><span class=n>retrieved</span> <span class=o>=</span> <span class=s>'https://api-uat.dwolla.com/funding-sources/e52006c3-7560-4ff1-99d5-b0f3a6f4f909'</span>

<span class=c># Using dwollav2 - https://github.com/Dwolla/dwolla-v2-python (Recommended)</span>
<span class=n>account_token</span><span class=o>.</span><span class=n>post</span><span class=p>(</span><span class=s>'</span><span class=si>%</span><span class=s>s/micro-deposits'</span> <span class=o>%</span> <span class=n>retrieved</span><span class=p>)</span>

<span class=c># Using dwollaswagger - https://github.com/Dwolla/dwolla-swagger-python</span>
<span class=n>fs_api</span> <span class=o>=</span> <span class=n>dwollaswagger</span><span class=o>.</span><span class=n>FundingsourcesApi</span><span class=p>(</span><span class=n>client</span><span class=p>)</span>
<span class=n>micro_deposits</span> <span class=o>=</span> <span class=n>fs_api</span><span class=o>.</span><span class=n>micro_deposits</span><span class=p>(</span><span class=n>retrieved</span><span class=p>)</span>
</code></pre></div></div><div class="code-snippet js-code-snippet language-php"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-php data-lang=php><span class=cp>&lt;?php</span>
<span class=nv>$fsApi</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>DwollaSwagger\FundingsourcesApi</span><span class=p>(</span><span class=nv>$apiClient</span><span class=p>);</span>
<span class=nv>$micro_deposits</span> <span class=o>=</span> <span class=nv>$fsApi</span><span class=o>-&gt;</span><span class=na>micro_deposits</span><span class=p>(</span><span class=nv>$retrieved</span><span class=p>);</span>
<span class=cp>?&gt;</span>
</code></pre></div></div><h3 id=verify-micro-deposits>Verify micro-deposits</h3><p>In the Dwolla production environment, you must wait until the micro-deposits actually post to the customer’s bank account before the account can be verified, which can take 1-2 business days. A <code>microdeposits_completed</code> event will be triggered once micro-deposits have successfully posted to the bank. Once micro-deposits have completed, a <code>verify-micro-deposits</code> link relation will return on the funding source letting your application know the funding source can be verified.</p><p><strong>Note</strong>: In the Sandbox environment, any amount <strong>below</strong> $0.10 will allow you to verify the account immediately.</p><div class="code-snippet js-code-snippet language-raw"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-raw data-lang=raw>POST /funding-sources/e52006c3-7560-4ff1-99d5-b0f3a6f4f909/micro-deposits
Authorization: Bearer 8tJjM7iTjujLthkbVPMUcHLqMNw4uv5kG712g9j1RRBHplGpwo
Content-Type: application/vnd.dwolla.v1.hal+json
Accept: application/vnd.dwolla.v1.hal+json

{
    "amount1": {
        "value": "0.03",
        "currency": "USD"
    },
    "amount2": {
        "value": "0.09",
        "currency": "USD"
    }
}

HTTP 200 OK
</code></pre></div></div><div class="code-snippet js-code-snippet language-ruby"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-ruby data-lang=ruby><span class=n>funding_source_url</span> <span class=o>=</span> <span class=s1>'https://api-uat.dwolla.com/funding-sources/e52006c3-7560-4ff1-99d5-b0f3a6f4f909'</span>
<span class=n>request_body</span> <span class=o>=</span> <span class=p>{</span>
  <span class=ss>:amount1</span> <span class=o>=&gt;</span> <span class=p>{</span>
    <span class=ss>:value</span> <span class=o>=&gt;</span> <span class=s2>"0.03"</span><span class=p>,</span>
    <span class=ss>:currency</span> <span class=o>=&gt;</span> <span class=s2>"USD"</span>
  <span class=p>},</span>
  <span class=ss>:amount2</span> <span class=o>=&gt;</span> <span class=p>{</span>
    <span class=ss>:value</span> <span class=o>=&gt;</span> <span class=s2>"0.09"</span><span class=p>,</span>
    <span class=ss>:currency</span> <span class=o>=&gt;</span> <span class=s2>"USD"</span>
  <span class=p>}</span>
<span class=p>}</span>

<span class=c1># Using DwollaV2 - https://github.com/Dwolla/dwolla-v2-ruby (Recommended)</span>
<span class=n>account_token</span><span class=p>.</span><span class=nf>post</span> <span class=s2>"</span><span class=si>#{</span><span class=n>funding_source_url</span><span class=si>}</span><span class=s2>/micro-deposits"</span><span class=p>,</span> <span class=n>request_body</span>

<span class=c1># Using DwollaSwagger - https://github.com/Dwolla/dwolla-swagger-ruby</span>
<span class=no>DwollaSwagger</span><span class=o>::</span><span class=no>FundingsourcesApi</span><span class=p>.</span><span class=nf>micro_deposits</span><span class=p>(</span><span class=n>funding_source_url</span><span class=p>,</span> <span class=ss>body: </span><span class=n>request_body</span><span class=p>)</span>
</code></pre></div></div><div class="code-snippet js-code-snippet language-javascript"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-javascript data-lang=javascript><span class=kd>var</span> <span class=nx>fundingSourceUrl</span> <span class=o>=</span> <span class=s1>'https://api-uat.dwolla.com/funding-sources/e52006c3-7560-4ff1-99d5-b0f3a6f4f909'</span><span class=p>;</span>
<span class=kd>var</span> <span class=nx>requestBody</span> <span class=o>=</span> <span class=p>{</span>
  <span class=na>amount1</span><span class=p>:</span> <span class=p>{</span>
    <span class=na>value</span><span class=p>:</span> <span class=s1>'0.03'</span><span class=p>,</span>
    <span class=na>currency</span><span class=p>:</span> <span class=s1>'USD'</span>
  <span class=p>},</span>
  <span class=na>amount2</span><span class=p>:</span> <span class=p>{</span>
    <span class=na>value</span><span class=p>:</span> <span class=s1>'0.09'</span><span class=p>,</span>
    <span class=na>currency</span><span class=p>:</span> <span class=s1>'USD'</span>
  <span class=p>}</span>
<span class=p>};</span>

<span class=nx>accountToken</span><span class=p>.</span><span class=nx>post</span><span class=p>(</span><span class=err>`</span><span class=nx>$</span><span class=p>{</span><span class=nx>fundingSourceUrl</span><span class=p>}</span><span class=sr>/micro-deposits`, requestBody</span><span class=se>)</span><span class=err>;
</span></code></pre></div></div><div class="code-snippet js-code-snippet language-python"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-python data-lang=python><span class=n>funding_source_url</span> <span class=o>=</span> <span class=s>'https://api-uat.dwolla.com/funding-sources/e52006c3-7560-4ff1-99d5-b0f3a6f4f909'</span>
<span class=n>request_body</span> <span class=o>=</span> <span class=p>{</span>
    <span class=s>"amount1"</span><span class=p>:</span> <span class=p>{</span>
        <span class=s>"value"</span><span class=p>:</span> <span class=s>"0.03"</span><span class=p>,</span>
        <span class=s>"currency"</span><span class=p>:</span> <span class=s>"USD"</span>
    <span class=p>},</span>
    <span class=s>"amount2"</span><span class=p>:</span> <span class=p>{</span>
        <span class=s>"value"</span><span class=p>:</span> <span class=s>"0.09"</span><span class=p>,</span>
        <span class=s>"currency"</span><span class=p>:</span> <span class=s>"USD"</span>
    <span class=p>}</span>
<span class=p>}</span>

<span class=c># Using dwollav2 - https://github.com/Dwolla/dwolla-v2-python (Recommended)</span>
<span class=n>account_token</span><span class=o>.</span><span class=n>post</span><span class=p>(</span><span class=s>'</span><span class=si>%</span><span class=s>s/micro-deposits'</span> <span class=o>%</span> <span class=n>funding_source_url</span><span class=p>,</span> <span class=n>request_body</span><span class=p>)</span>

<span class=c># Using dwollaswagger - https://github.com/Dwolla/dwolla-swagger-python</span>
<span class=n>fs_api</span> <span class=o>=</span> <span class=n>dwollaswagger</span><span class=o>.</span><span class=n>FundingsourcesApi</span><span class=p>(</span><span class=n>client</span><span class=p>)</span>
<span class=n>fs_api</span><span class=o>.</span><span class=n>micro_deposits</span><span class=p>(</span><span class=n>funding_source_url</span><span class=p>,</span> <span class=n>body</span> <span class=o>=</span> <span class=n>request_body</span><span class=p>)</span>
</code></pre></div></div><div class="code-snippet js-code-snippet language-php"><button class="btn alternative">copy</button><div class=code-snippet__selector><nav><button class=selector_switch id=raw>raw</button> <button class=selector_switch id=php>php</button> <button class=selector_switch id=ruby>ruby</button> <button class=selector_switch id=python>python</button> <button class=selector_switch id=javascript>javascript</button></nav></div><div class="code-snippet__cnt highlight"><pre><code class=language-php data-lang=php><span class=cp>&lt;?php</span>
<span class=nv>$fundingSourceUrl</span> <span class=o>=</span> <span class=s1>'https://api-uat.dwolla.com/funding-sources/e52006c3-7560-4ff1-99d5-b0f3a6f4f909'</span><span class=p>;</span>

<span class=nv>$fsApi</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>DwollaSwagger\FundingsourcesApi</span><span class=p>(</span><span class=nv>$apiClient</span><span class=p>);</span>

<span class=nv>$fsApi</span><span class=o>-&gt;</span><span class=na>micro_deposits</span><span class=p>(</span><span class=nv>$fundingSourceUrl</span><span class=p>,</span> <span class=p>[</span>
  <span class=s1>'amount1'</span> <span class=o>=&gt;</span> <span class=p>[</span>
    <span class=s1>'value'</span> <span class=o>=&gt;</span> <span class=s1>'0.03'</span><span class=p>,</span>
    <span class=s1>'currency'</span> <span class=o>=&gt;</span> <span class=s1>'USD'</span>
  <span class=p>],</span>
  <span class=s1>'amount2'</span> <span class=o>=&gt;</span> <span class=p>[</span>
    <span class=s1>'value'</span> <span class=o>=&gt;</span> <span class=s1>'0.09'</span><span class=p>,</span>
    <span class=s1>'currency'</span> <span class=o>=&gt;</span> <span class=s1>'USD'</span>
  <span class=p>]</span>
<span class=p>]);</span>
<span class=cp>?&gt;</span>
</code></pre></div></div><h3 id=handle-failed-verification-attempts>Handle failed verification attempts</h3><p>Your customer will have only three attempts to correctly input the two posted micro-deposit amounts. If your customer reaches the max attempts allowed, a <code>microdeposits_maxattempts</code> <a href=https://docsv2.dwolla.com/#events>event</a> will be triggered and they will no longer be allowed to verify the funding source using those same two posted micro-deposit amounts. In order to retry bank account verification via micro-deposits, the following steps will need to be taken by your customer and application:</p><ol><li><a href=https://docsv2.dwolla.com/#remove-a-funding-source>Removal of the funding source</a> with failed micro-deposit verification attempts.</li><li>Wait 48 hours after the initial funding source was added to re-add the funding source.</li><li>Initiate new micro-deposits to the funding source.</li><li>Verify the funding source using the new posted micro-deposit amounts.</li></ol><p>Links returned on the funding source resource, either <code>initiate-micro-deposits</code> or <code>verify-micro-deposits</code>, will give your application insight into whether the funding source is eligible to receive or verify micro-deposits.</p><hr><section class=copyright><div class=page-wrap><div><span>© 2017 HAT Data Exchange Ltd.</span> <a href="https://hubofallthings.com/main/cookie-policy/">Cookie Policy</a></div></div></section></section></div></div></div><script src=//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js></script><script>window.jQuery || document.write('<script src="/_bower_components/jquery/jquery.min.js"><\/script>')</script><script src=/js/script.44e4.js></script></body></html>